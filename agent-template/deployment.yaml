# environment: local | TEE
environment: TEE

# network: testnet | mainnet
network: testnet

# Path to docker-compose file
docker_compose_path: ./docker-compose.yaml

agent_contract: 
  # NEAR Account Id of the contract
  # Fill this out with a unique contract id for your agent contract
  # For example: example-contract-123.testnet
  contract_id: oiaasdjffasfd.testnet
  
  # Optional, if not provided the contract will not be deployed 
  # and it's assumed the agent contract is already deployed to the contract_id
  # and is initialized
  deploy_custom: 
    enabled: true
    # Amount to fund the agent contract with in NEAR
    funding_amount: 7
    # If true the key for contract account will be deleted after deployment locking it  
    delete_key: false

    # Choose ONE of the following:
    # Option 1: Build contract from source and deploy
    deploy_from_source: 
      enabled: false
      source_path: ./shade-contract-template
    # Option 2: Use pre-built WASM file
    deploy_from_wasm:
      enabled: true
      wasm_path: ./shade-contract-template/target/near/shade_contract_template.wasm

    # Optional, if not provided the contract will not be initialized
    init: 
      enabled: true
      method_name: new
      # The <MASTER_ACCOUNT_ID> will automatically be replaced with the master account set up in the auth of the CLI
      # The <DEFAULT_MPC_CONTRACT_ID> will automatically be selected based on the network
      # The <REQUIRES_TEE> will automatically be selected based on the environment
      args: |
        {
          "owner_id": "<MASTER_ACCOUNT_ID>",
          "mpc_contract_id": "<DEFAULT_MPC_CONTRACT_ID>",
          "requires_tee": "<REQUIRES_TEE>"
        }
      # tgas: 30

# Optional, if not provided the current docker-compose.yaml file will be used
# Only applicable if the environment is TEE
build_docker_image:
  enabled: true
  # Fill this out with the docker tag you want to use. For example: pivortex/shade-agent-test
  tag: pivortex/shade-agent-test
  cache: true
  dockerfile_path: ../Dockerfile

# Optional, if not provided the codehash will not be approved
approve_codehash:
  enabled: true
  method_name: approve_codehash
  # The <CODEHASH> will automatically be replaced with the appropriate codehash
  # for local it will be set to "not-in-a-tee"
  # for TEE and docker disabled it will be set to the existing codehash in your docker-compose file
  # for TEE and docker enabled it will be set to the codehash of the docker image once it's pushed to the registry
  args: |
    {
      "codehash": "<CODEHASH>"
    }
  # tgas: 30

# Optional, if not provided the app will not be deployed to Phala Cloud
# Only applicable if the environment is TEE
deploy_to_phala:
  enabled: true
  app_name: my-first-shade-agent
  env_file_path: ./.env

# Optional, if not provided the "shade-agent-cli whitelist" command will not be available
whitelist_agent:
  method_name: whitelist_agent
  # The <AGENT_ACCOUNT_ID> will automatically be replaced with the agent account id
  # specified when running the "shade-agent-cli whitelist" command
  args: |
    {
      "account_id": "<AGENT_ACCOUNT_ID>"
    }
  # tgas: 30